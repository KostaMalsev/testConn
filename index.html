<head>
  title>Connection status</title>
  <meta name="viewport" content="width=device-width,height=device-height,user-scalable=no,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0">
  <meta charset="utf-8">

  <link rel="stylesheet" href="styles.css">

</head>

<body>

<div class="dialog">


    <div class="subtitle" id='data'> </div>
    <p> </p>
    <div class="subtitle" id='ref'> </div>

<script src="https://unpkg.com/webrtc-test-suite@2.1.2/dist/index.js"></script>
<script>

const STUN_URL= 'stun.l.google.com:19302';
let rtcConfig =
    {
        iceServers: [{ RTCIceServer: { urls:  STUN_URL } }]
    };

let res = await _rtc.checkRelayPerformance(rtcConfig);

    
    
//let iosconn= navigator.webkitConnection;
let cnn = navigator.connection;
if( cnn){
document.querySelector(".subtitle").innerHTML = 'TRIP:' + cnn.rtt + ' DOWNLNK:' + cnn.downlink + ' TYPE:' + cnn.effectiveType;
document.getElementById('ref').innerHTML = 'REF: rttMin = 100, downlink 3Mbit ';
}else{
  document.querySelector(".subtitle").innerHTML = (Object.values({a:1, b:2})).toString();//JSON.stringify(_rtc); //'unavailible'
}
//document.getElementById('ref').innerHTML = //JSON.stringify(iosconn);
/*
async function makeCall() {
    const configuration = {'iceServers': [{'urls': 'stun:stun.l.google.com:19302'}]}
    const peerConnection = new RTCPeerConnection(configuration);
    /*signalingChannel.addEventListener('message', async message => {
        if (message.answer) {
            const remoteDesc = new RTCSessionDescription(message.answer);
            await peerConnection.setRemoteDescription(remoteDesc);
        }
    });
    let res = await peerConnection.getStats();
    console.log(res);
    //const offer = await peerConnection.createOffer();
    //await peerConnection.setLocalDescription(offer);
    //signalingChannel.send({'offer': offer});
}*/

//makeCall();

</script>
</body>